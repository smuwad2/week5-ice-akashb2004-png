<!DOCTYPE html>
<html>
    <head>
        <!-- Bootstrap -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    </head>
    <body>
        <div class="bg-light text-center p-5 mb-4">
            <h2>Choose an option:</h2>
            <label for="limit">Limit:</label>
            <input id="limit" type="number" min="1" max="5" value="1" onchange="getData()">
            <select id="type" onchange="getData()">
                <option value="customers">customers</option>
                <option value="products">products</option>
                <option value="suppliers">suppliers</option>
            </select>
        </div>

        <div id="result"></div>

        <script>
            function getData() {
                var limit = document.getElementById("limit").value;
                var type = document.getElementById("type").value;
                var output = document.getElementById("result");
                // renamed here

                axios.get("/data", { params: { type: type, limit: limit } })
                    .then(function(res) {
                        var data = res.data.records;
                        var table = "<h2>" + type + "</h2>";

                        if (data.length === 0) {
                            table += "<p>No data</p>";
                        } else {
                            table += "<table class='table table-bordered'><tr>";
                            // headers
                            for (var key in data[0]) {
                                table += "<th>" + key + "</th>";
                            }
                            table += "</tr>";
                            // rows
                            data.forEach(function(row) {
                                table += "<tr>";
                                for (var key in row) {
                                    html += "<td>" + row[key] + "</td>";
                                }
                                table += "</tr>";
                            });
                            table += "</table>";
                        }
                        output.innerHTML = table;
                    })
                    .catch(function() {
                        output.innerHTML = "<h2>" + type + "</h2><p>Error loading data</p>";
                    });
            }
            getData();
        </script>
    </body>
</html>
